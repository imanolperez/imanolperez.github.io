function drawTutorial(a){1==tutorial&&(a.save(),a.scale(1,3),a.beginPath(),a.fillStyle="rgba(255, 255, 255, 0.4)",a.arc(.05*W,.5*H/3,.05*W,0,2*Math.PI),a.arc(.95*W,.5*H/3,.05*W,0,2*Math.PI),a.fill(),a.restore(),a.save(),a.fillStyle="white",a.font=.04*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="middle",text="Touch right or left to move inside a planet",a.fillText(text,.5*W,.5*H),a.drawImage(fingerImage,.02*W,.6*H,.05*W,99*.05*W/52),a.scale(-1,1),a.drawImage(fingerImage,-.97*W,.6*H,.05*W,99*.05*W/52),a.restore()),2==tutorial&&(a.save(),a.scale(1.5,1),a.beginPath(),a.fillStyle="rgba(255, 255, 255, 0.4)",a.arc(.5*W/1.5,.5*H,.3*H,0,2*Math.PI),a.fill(),a.restore(),a.save(),a.fillStyle="white",a.font=.04*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="middle",text="Touch the center of the screen to jump from planet to planet",a.fillText(text,.5*W,.5*H),a.drawImage(fingerImage,.5*W-.05*W,.6*H,.05*W,99*.05*W/52),a.restore()),3==tutorial&&(a.save(),a.fillStyle="white",a.font=.03*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="middle",text="Try to reach the portal. You'll have to get all the balls to get 3 stars",a.fillText(text,.5*W,.5*H),a.restore()),4.1==tutorial&&(a.save(),a.scale(1,3),a.beginPath(),a.fillStyle="rgba(255, 255, 255, 0.4)",a.arc(.5*W,.5*H/3,.04*H,0,2*Math.PI),a.fill(),a.restore(),a.save(),a.fillStyle="white",a.font=.04*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="bottom",text="Be careful with the asteroids!",a.fillText(text,.5*W,.9*H),a.restore()),4.2==tutorial&&(a.save(),a.scale(1,3),a.beginPath(),a.fillStyle="rgba(255, 255, 255, 0.4)",a.arc(.5*W,.5*H/3,.04*H,0,2*Math.PI),a.fill(),a.restore(),a.save(),a.fillStyle="white",a.font=.04*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="bottom",text="They have very little mass, but they kill you",a.fillText(text,.5*W,.9*H),a.restore()),6.1==tutorial&&(a.save(),a.scale(1,2),a.beginPath(),a.fillStyle="rgba(255, 255, 255, 0.2)",a.arc(.5*W,.5*H/2,.06*W,0,2*Math.PI),a.fill(),a.restore(),a.save(),a.fillStyle="white",a.font=.04*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="bottom",text="Black holes are very heavy, and they will instantly kill you",a.fillText(text,.5*W,.9*H),a.restore()),9.1==tutorial&&(a.save(),a.scale(1,2),a.beginPath(),a.fillStyle="rgba(255, 255, 255, 0.2)",a.arc(.35*W,.5*H/2,.06*W,0,2*Math.PI),a.arc(.65*W,.5*H/2,.06*W,0,2*Math.PI),a.fill(),a.restore(),a.save(),a.fillStyle="white",a.font=.04*W+"px LeagueGothic",a.textAlign="center",a.textBaseline="bottom",text="Use Teleportation Gates to move through space",a.fillText(text,.5*W,.9*H),a.restore())}function renderControls(a){a.save(),a.beginPath(),a.lineWidth=3,a.arc(.5*W,.5*H,.48*W,.9*Math.PI,.99*Math.PI);var b=a.createLinearGradient(0,.5*H,.05*W,.5*H);b.addColorStop(0,"white"),b.addColorStop(1,"transparent"),a.strokeStyle=b,a.stroke(),a.beginPath(),a.lineWidth=3,a.arc(.5*W,.5*H,.48*W,1.01*Math.PI,1.1*Math.PI);var b=a.createLinearGradient(0,.5*H,.05*W,.5*H);b.addColorStop(0,"white"),b.addColorStop(1,"transparent"),a.strokeStyle=b,a.stroke(),a.beginPath(),a.moveTo(.015*W,.5*H),a.lineTo(.025*W,.49*H),a.lineTo(.025*W,.51*H),a.fillStyle="rgba(255, 255, 255, 0.3)",a.fill(),a.beginPath(),a.lineWidth=3,a.arc(.5*W,.5*H,.48*W,.01*Math.PI,.1*Math.PI);var b=a.createLinearGradient(W,.5*H,.95*W,.5*H);b.addColorStop(0,"white"),b.addColorStop(1,"transparent"),a.strokeStyle=b,a.stroke(),a.beginPath(),a.lineWidth=3,a.arc(.5*W,.5*H,.48*W,-.1*Math.PI,-.01*Math.PI);var b=a.createLinearGradient(W,.5*H,.95*W,.5*H);b.addColorStop(0,"white"),b.addColorStop(1,"transparent"),a.strokeStyle=b,a.stroke(),a.beginPath(),a.moveTo(W-.015*W,.5*H),a.lineTo(W-.025*W,.49*H),a.lineTo(W-.025*W,.51*H),a.fillStyle="rgba(255, 255, 255, 0.3)",a.fill(),a.restore()}function downGame(b,c){return 0==tutorial&&1==play&&0==completedLevel&&Math.sqrt(Math.pow(b-pauseImage.px-.5*pauseImage.w,2)+Math.pow(c-pauseImage.py-.5*pauseImage.h,2))<.5*pauseImage.w?0:1==completedLevel||pause?0:1==tutorial||2==tutorial?(tutorial+=1,0):3==tutorial?(tutorial=0,0):4.1==tutorial?(tutorial=4.2,0):4.2==tutorial?(tutorial=0,0):6.1==tutorial?(tutorial=0,0):9.1==tutorial?(tutorial=0,0):(-1!=play&&(0==play||(b>=.8*W&&0==a.j?a.d=-1:.2*W>=b&&0==a.j?a.d=1:0==a.j&&(a.j=1,a.d=0,a.t=0,a.v=[(a.c[0]-a.p.c[0])/a.p.r,(a.c[1]-a.p.c[1])/a.p.r],a.p=0))),void 0)}function upGame(b,c){return 0==tutorial&&1==play&&0==completedLevel&&Math.sqrt(Math.pow(b-pauseImage.px-.5*pauseImage.w,2)+Math.pow(c-pauseImage.py-.5*pauseImage.h,2))<.5*pauseImage.w?(pause=!pause,0):(0==completedLevel&&(a.d=0),-1==play||1==play&&0==completedLevel&&!pause?0:(Math.sqrt(Math.pow(.5*W-b,2)+Math.pow(.82*H-c,2))<.06*W&&(1==play?(completedLevel=0,pause?pause=!1:lvl(lv+1)):(completedLevel=0,lvl(lv))),Math.sqrt(Math.pow(.62*W-b,2)+Math.pow(.82*H-c,2))<.035*W&&(1!=play?(completedLevel=0,lvl(lv+1)):(completedLevel=0,lvl(lv))),Math.sqrt(Math.pow(.38*W-b,2)+Math.pow(.82*H-c,2))<.035*W&&(completedLevel=0,levels()),Math.sqrt(Math.pow(b-musicImage.px-.5*musicImage.w,2)+Math.pow(c-musicImage.py-.5*musicImage.h,2))<.5*musicImage.w&&musicToggle(),void 0))}function P(a,b,c,d,e,f){this.readyCollide=!0,this.r=c,this.binary=f,this.c=[a,b],this.c0=[a,b],this.t=6==e?2*Math.random()*Math.PI:0,this.ti=0,this.ty=d,this.co=e,this.u=function(){switch(this.ty){case 0:break;case 1:this.c[1]-=1;break;case 2:this.ti+=.02,this.c=[this.c0[0]+50*Math.sin(this.ti),this.c0[1]+50*Math.cos(this.ti)];break;case 3:this.ti+=.03,this.c=[this.c0[0]-30*Math.sin(this.ti),this.c0[1]+30*Math.cos(this.ti)];break;case 4:this.ti+=.03,this.c=[this.c0[0],50*Math.sin(this.ti)+this.c0[1]];break;case 5:this.ti+=.015,this.c=[.1*W*Math.sin(this.ti)+this.c0[0],this.c0[1]];break;case 6:this.ti+=.02,this.c=[this.c0[0]-.13*Math.sin(this.ti)*W,this.c0[1]+.13*Math.cos(this.ti)*W];break;default:this.ti+=.02,this.c=[this.c0[0]+.13*Math.sin(this.ty+this.ti)*W,this.c0[1]+.13*Math.cos(this.ty+this.ti)*W]}}}function E(a,b,c,d){this.r=c,this.c=[a,b],this.co=d,this.d=0}function A(a,b,c){this.r=.022*W,this.c=[a,b],this.t=0,this.j=0,this.v=[0,0],this.p=c,this.d=0,this.x0=0,this.u=function(a){if(0!=this.j){g=[0,0],G=50,player=this,a.forEach(function(a){0!=a.co&&5!=a.co&&6!=a.co&&7!=a.co&&(gM=G*a.r/(Math.pow(a.c[0]-player.c[0],2)+Math.pow(a.c[1]-player.c[1],2)),4==a.co&&(gM*=2),gu=[a.c[0]-player.c[0],a.c[1]-player.c[1]],gu[0]/=Math.sqrt(gu[0]*gu[0]+gu[1]*gu[1]),gu[1]/=Math.sqrt(gu[0]*gu[0]+gu[1]*gu[1]),gu[0]*=gM,gu[1]*=gM,g[0]+=gu[0],g[1]+=gu[1])});var b=40/643*H;0==this.x0&&(this.x0=this.c,this.c[0]+=.05*this.v[0]*b,this.c[1]+=3*.05*this.v[1]*b,this.v[0]+=.05*g[0],this.v[1]+=.05*g[1]),this.c[0]+=.05*this.v[0]*b,this.c[1]+=.05*this.v[1]*b,this.v[0]+=.05*g[0],this.v[1]+=.05*g[1]}else this.c[0]=Math.floor(-(this.p.r+this.r)*Math.sin(this.t)+this.p.c[0]),this.c[1]=Math.floor(-(this.p.r+this.r)*Math.cos(this.t)+this.p.c[1])}}function ls(a){a.fillStyle="rgb(250, 250, 250)",a.font="24px Helvetica",a.textAlign="left",a.textBaseline="top",a.fillText("You were lost into the deep space!",100,130),a.fillText("There's nothing out there... but you.",100,180),a.fillStyle="rgb(250, 0, 0)",a.font="18px Helvetica",a.fillText("Press any button to start again",160,250)}function u(b){k="which"in b?b.which:b.keyCode,(39==k||37==k&&1==play)&&(a.d=0)}function d(b){-1!=play&&(0==play?(lvl(lv),play=1):(k="which"in b?b.which:b.keyCode,39==k&&0==a.j&&(a.d=-1),37==k&&0==a.j&&(a.d=1),38==k&&0==a.j&&(a.j=1,a.d=0,a.t=0,a.v=[(a.c[0]-a.p.c[0])/a.p.r,(a.c[1]-a.p.c[1])/a.p.r],a.p=0)))}function setStars(a){for(var b=1;50>b;b++)a.save(),a.fillStyle="#fff",a.translate(Math.floor(Math.random()*W),Math.floor(Math.random()*H)),drawStar(a,Math.floor(4*Math.random())+2),a.restore()}function drawStar(a,b){a.save(),a.beginPath(),a.fillStyle="rgba(255,255,255,0.5)",a.moveTo(b,0);for(var c=0;9>c;c++)a.rotate(Math.PI/5),0==c%2?a.lineTo(.200811*(b/.525731),0):a.lineTo(b,0);a.closePath(),a.fill(),a.restore()}function move(b){if(0!=a.j)for(a.t+=.05,i=0;i<p.length;i++){var c=1;if(5==p[i].co&&(c=.7),Math.sqrt(Math.pow(a.c[0]-p[i].c[0],2)+Math.pow(a.c[1]-p[i].c[1],2))<=c*(p[i].r+a.r-5)){if(!p[i].readyCollide)continue;if(5==p[i].co){partner=p[p[i].binary].readyCollide=!1;var d=p[p[i].binary].c[0],e=p[p[i].binary].c[1];a.c=[d,e],a.u(p)}else 4==p[i].co||6==p[i].co?(play=0,asteroid=6==p[i].co?!0:!1):(a.p=p[i],dr=[a.c[0]-a.p.c[0],a.c[1]-a.p.c[1]],a.t=Math.atan2(dr[0],dr[1])+Math.PI,a.j=0,a.d=1,a.u(p),a.d=0,a.x0=0)}else p[i].readyCollide=!0}else 0!=a.d&&(a.t+=.025*a.d);a.u(p),(a.c[0]+a.r<0||a.c[0]-a.r>W||a.c[1]+a.r<0||a.c[1]-a.r>H)&&0!=a.j&&(play=0),el.forEach(function(c){0!=play&&0==c.d&&Math.pow(a.c[0]-c.c[0],2)+Math.pow(a.c[1]-c.c[1],2)<=Math.pow(a.r+c.r,2)&&(got+=1,c.c=[-100,-100],c.d=1,cLevel=lv-1,4==c.co&&(localStorage["level"+cLevel]<got-1&&(record=!0),1==localStorage.audio&&successAudio.play(),completedLevel=1,play=1,nlvl(b,1),localStorage["level"+cLevel]=Math.max(localStorage["level"+cLevel],got-1)))})}function nlvl(a,b){if(a.save(),a.beginPath(),a.fillStyle="rgba(0,0,0,0.4)",a.fillRect(.15*W,.15*H,.7*W,.7*H),a.fill(),a.fillStyle="rgb(250, 250, 250)",a.font=.07*H+"px LeagueGothic",(0==b||2==b)&&(a.font=.1*H+"px LeagueGothic"),a.textAlign="center",a.textBaseline="top",lvv=lv,text=1==b?"LEVEL "+lvv+" COMPLETED!":0==b?"YOU DIED":"PAUSE",0==b||2==b?(a.textBaseline="bottom",a.fillText(text,.5*W,.5*H)):a.fillText(text,.5*W,.28*H),1==b){var c;c=got>=2?starImageHD:noStarImageHD,a.drawImage(c,.34*W,.45*H,.1*W,.1*W),c=got>=3?starImageHD:noStarImageHD,a.drawImage(c,.45*W,.45*H,.1*W,.1*W),c=got>=4?starImageHD:noStarImageHD,a.drawImage(c,(.61-.05)*W,.45*H,.1*W,.1*W)}record&&a.drawImage(recordImage,.8*W-.07*W,.15*H-.02*W,.2*W,.2*W),a.drawImage(menuImage,.38*W-.035*W,.82*H-.025*W,.07*W,.07*W),1==b||2==b?(a.drawImage(repeatImage,.62*W-.035*W,.82*H-.025*W,.07*W,.07*W),a.drawImage(playImage,.5*W-.06*W,.82*H-.06*W,.12*W,.12*W)):(a.drawImage(playImage,.62*W-.035*W,.82*H-.025*W,.07*W,.07*W),a.drawImage(repeatImage,.5*W-.06*W,.82*H-.06*W,.12*W,.12*W)),musicImage.w=.07*W,musicImage.h=musicImage.w,musicImage.px=.9*W,musicImage.py=.98*H-musicImage.h,music2Image.w=.07*W,music2Image.h=musicImage.w,music2Image.px=.9*W,music2Image.py=.98*H-musicImage.h,1==localStorage.audio?a.drawImage(musicImage,musicImage.px,musicImage.py,musicImage.w,musicImage.h):a.drawImage(music2Image,musicImage.px,musicImage.py,musicImage.w,musicImage.h),a.restore()}function lvl(b){if(gameOver=!1,pause=!1,asteroid=!1,1!=b&&-1==localStorage["level"+(b-2)])return menu(),0;switch(completedLevel=0,play=1,record=!1,place="game",p=[],el=[],got=0,lv=b,tutorial=1==b?1:0,4==b&&(tutorial=4.1),6==b&&(tutorial=6.1),9==b&&(tutorial=9.1),b){case 1:p.push(new P(.3*W,.5*H,.1*W,0,1,-1)),p.push(new P(.7*W,.5*H,.3*H,0,3,-1)),a=new A(100,145,p[0]),el.push(new E(.4*W,.4*H,.005*W,1)),el.push(new E(.7*W,.195*H,.005*W,2)),el.push(new E(.7*W-.25*H,.3*H,.005*W,3)),el.push(new E(.7*W,.88*H,.03*W,4));break;case 2:p.push(new P(.3*W,.5*H,.1*W,0,2,-1)),p.push(new P(.7*W,.3*H,.07*W,0,1,-1)),p.push(new P(.6*W,.8*H,.07*W,0,3,-1)),a=new A(-200,-255,p[0]),el.push(new E(.4*W,.6*H,.005*W,1)),el.push(new E(.62*W,.3*H,.005*W,2)),el.push(new E(.65*W,.67*H,.005*W,3)),el.push(new E(.81*W,.3*H,.03*W,4));break;case 3:p.push(new P(.7*W,.5*H,.15*W,0,1,-1)),p.push(new P(.2*W,.5*H,.05*W,5,2,-1)),a=new A(-200,-255,p[0]),el.push(new E(.4*W,.6*H,.005*W,1)),el.push(new E(.86*W,.5*H+.06*W,.005*W,2)),el.push(new E(.05*W,.5*H,.005*W,3)),el.push(new E(.7*W+.19*.5*Math.sqrt(2)*W,.5*H-.19*.5*Math.sqrt(2)*W,.03*W,4));break;case 4:p.push(new P(.68*W,.5*H,.1*W,0,2,-1)),p.push(new P(.32*W,.5*H,.1*W,0,3,-1)),p.push(new P(.5*W,.5*H-.04*W,.01*W,0,6,-1)),p.push(new P(.5*W,.5*H-.02*W,.01*W,0,6,-1)),p.push(new P(.5*W,.5*H,.01*W,0,6,-1)),p.push(new P(.5*W,.5*H+.02*W,.01*W,0,6,-1)),a=new A(-200,-255,p[0]),el.push(new E(.5*W,.6*H+.04*W,.005*W,1)),el.push(new E(.5*W,.4*H-.04*W,.005*W,2)),el.push(new E(.1*W,.5*H,.005*W,3)),el.push(new E(.68*W+.21*.5*Math.sqrt(2)*W,.5*H+.21*.5*Math.sqrt(2)*W,.03*W,4));break;case 5:for(p.push(new P(.8*W,.5*H,.03*W,6,2,-1)),p.push(new P(.1*W,.8*H,.05*W,0,3,-1)),p.push(new P(.2*W,.5*H,.03*W,5,6,-1)),i=0;15>i;i++)p.push(new P(.5*W,.6*H+.02*i*W,.01*W,0,6,-1));for(i=0;15>i;i++)p.push(new P(.5*W,.4*H-.02*i*W,.01*W,0,6,-1));a=new A(-200,-255,p[0]),el.push(new E(.8*W,.5*H+.17*W,.005*W,1)),el.push(new E(.5*W,.5*H,.005*W,2)),el.push(new E(.25*W,.8*H,.005*W,3)),el.push(new E(.3*W,.8*H,.03*W,4));break;case 6:p.push(new P(.22*W,.8*H,.03*W,0,2,-1)),p.push(new P(.22*W,.2*H,.03*W,0,1,-1)),p.push(new P(.78*W,.8*H,.03*W,0,1,-1)),p.push(new P(.78*W,.2*H,.03*W,0,2,-1)),p.push(new P(.5*W,.5*H,.04*W,0,4,-1)),a=new A(-200,-255,p[0]),el.push(new E(.18*W,.5*H,.005*W,1)),el.push(new E(.78*W,.5*H,.005*W,2)),el.push(new E(.78*W,.2*H-.035*W,.005*W,3)),el.push(new E(.05*W,.2*H,.03*W,4));break;case 7:for(p.push(new P(.6*W,.4*H,.03*W,0,3,-1)),p.push(new P(0*W,0*H,.4*W,0,4,-1)),i=1;27>i;i++)p.push(new P(.6*W,.4*H,.01*W,i/(2*Math.PI),6,-1));a=new A(-200,-255,p[0]),el.push(new E(.6*W-.1*W,.4*H+.12*W,.005*W,1)),el.push(new E(.6*W-.2*W,.4*H+.14*W,.005*W,2)),el.push(new E(.6*W-.23*W,.4*H+.14*W,.005*W,3)),el.push(new E(.6*W-.35*W,.4*H+.11*W,.03*W,4));break;case 8:for(p.push(new P(.2*W,.9*H,.04*W,0,3,-1)),p.push(new P(.4*W,.85*H,.06*W,0,3,-1)),i=1;21>i;i++)p.push(new P(.4*W+.1*Math.cos(2*i/(2*Math.PI))*W,.85*H+.1*Math.sin(2*i/(2*Math.PI))*W,.01*W,0,6,-1));for(p.push(new P(.25*W,.4*H,.05*W,0,3,-1)),i=1;21>i;i++)p.push(new P(.25*W+.09*Math.cos(2*i/(2*Math.PI))*W,.4*H+.09*Math.sin(2*i/(2*Math.PI))*W,.01*W,0,6,-1));for(p.push(new P(.65*W,.5*H,.03*W,0,3,-1)),i=1;21>i;i++)p.push(new P(.65*W+.085*Math.cos(2*i/(2*Math.PI))*W,.5*H+.085*Math.sin(2*i/(2*Math.PI))*W,.01*W,0,6,-1));for(p.push(new P(.85*W,.1*H,.06*W,0,3,-1)),i=1;21>i;i++)p.push(new P(.85*W+.1*Math.cos(2*i/(2*Math.PI))*W,.1*H+.1*Math.sin(2*i/(2*Math.PI))*W,.01*W,0,6,-1));p.push(new P(.22*W,.05*H,.07*W,0,4,-1)),p.push(new P(.9*W,.5*H,.1*W,0,4,-1)),a=new A(-200,-255,p[0]),el.push(new E(.325*W,.62*H,.005*W,1)),el.push(new E(.45*W,.475*H,.005*W,2)),el.push(new E(.65*W,.45*H-.13*W,.005*W,3)),el.push(new E(.7*W,.4*H-.13*W,.03*W,4));break;case 9:p.push(new P(.1*W,.5*H,.03*W,0,2,-1)),p.push(new P(.35*W,.5*H,.04*W,0,5,2)),p.push(new P(.65*W,.5*H,.04*W,0,5,1)),p.push(new P(.9*W,.5*H,.03*W,0,1,-1)),p.push(new P(.5*W,.5*H,.01*W,0,6,-1)),p.push(new P(.48*W,.45*H,.01*W,0,6,-1)),p.push(new P(.52*W,.55*H,.01*W,0,6,-1)),p.push(new P(.47*W,.57*H,.01*W,0,6,-1)),p.push(new P(.5*W,.63*H,.01*W,0,6,-1)),p.push(new P(.5*W,.3*H,.01*W,0,6,-1)),p.push(new P(.48*W,.25*H,.01*W,0,6,-1)),p.push(new P(.52*W,.35*H,.01*W,0,6,-1)),p.push(new P(.47*W,.37*H,.01*W,0,6,-1)),p.push(new P(.5*W,.43*H,.01*W,0,6,-1)),p.push(new P(.5*W,.7*H,.01*W,0,6,-1)),p.push(new P(.48*W,.65*H,.01*W,0,6,-1)),p.push(new P(.52*W,.75*H,.01*W,0,6,-1)),p.push(new P(.47*W,.77*H,.01*W,0,6,-1)),p.push(new P(.5*W,.83*H,.01*W,0,6,-1)),p.push(new P(.5*W,.9*H,.01*W,0,6,-1)),p.push(new P(.48*W,.85*H,.01*W,0,6,-1)),p.push(new P(.52*W,.95*H,.01*W,0,6,-1)),p.push(new P(.47*W,.97*H,.01*W,0,6,-1)),p.push(new P(.5*W,1.03*H,.01*W,0,6,-1)),p.push(new P(.5*W,.1*H,.01*W,0,6,-1)),p.push(new P(.48*W,.05*H,.01*W,0,6,-1)),p.push(new P(.52*W,.15*H,.01*W,0,6,-1)),p.push(new P(.47*W,.17*H,.01*W,0,6,-1)),p.push(new P(.5*W,.23*H,.01*W,0,6,-1)),a=new A(-200,-255,p[0]),el.push(new E(.25*W,.5*H,.005*W,1)),el.push(new E(.78*W,.5*H,.005*W,2)),el.push(new E(.9*W,.5*H-.05*W,.005*W,3)),el.push(new E(.9*W,.6*H+.1*W,.03*W,4));break;case 10:p.push(new P(.5*W,.98*H-.1*W,.1*W,0,2,-1)),p.push(new P(.3*W,.6*H,.04*W,0,5,2)),p.push(new P(.65*W,.5*H,.04*W,0,5,1)),p.push(new P(.65*W,.3*H,.04*W,0,5,4)),p.push(new P(.25*W,.3*H,.04*W,0,5,3)),p.push(new P(.1*W,.98*H-.03*W,.1*W,0,3,-1)),p.push(new P(.5*W,.5*H-.1*W,.1*W,0,4,-1)),a=new A(-200,-255,p[0]),el.push(new E(.38*W,.98*H-.1*W,.005*W,1)),el.push(new E(.7*W,.98*H-.1*W,.005*W,2)),el.push(new E(.61*W,.98*H-.1*W,.005*W,3)),el.push(new E(.2*W,.15*H,.03*W,4));break;case 11:p.push(new P(.7*W,.5*H,.05*W,6,1,-1)),p.push(new P(.7*W,.5*H,.03*W,0,5,2)),p.push(new P(.2*W,.23*H-.04*W,.04*W,0,5,1)),p.push(new P(.7*W,.95*H,.03*W,5,1,-1)),p.push(new P(.35*W,.35*H-.08*W,.08*W,0,4,-1)),p.push(new P(.03*W,.15*H-.07*W,.02*W,0,3,-1)),a=new A(-200,-255,p[0]),el.push(new E(.15*W,.23*H-.06*W,.005*W,1)),el.push(new E(.7*W,.8*H,.005*W,2)),el.push(new E(.8*W,.95*H,.005*W,3)),el.push(new E(.37*W,.45*H,.03*W,4));break;case 12:for(p.push(new P(.1*W,.95*H-.05*W,.03*W,0,2,-1)),p.push(new P(.3*W,.2*H-.03*W,.03*W,0,5,2)),p.push(new P(.7*W,.23*H-.04*W,.04*W,0,5,1)),p.push(new P(.45*W,.95*H-.05*W,.03*W,0,5,4)),p.push(new P(.1*W,.15*H-.04*W,.03*W,0,5,3)),p.push(new P(.12*W,.4*H-.05*W,.03*W,0,2,-1)),p.push(new P(.9*W,.3*H-.05*W,.05*W,0,2,-1)),p.push(new P(.3*W,.75*H-.05*W,.03*W,0,4,-1)),p.push(new P(.11*W,.5*H,.02*W,0,6,-1)),p.push(new P(.05*W,.5*H,.02*W,0,6,-1)),p.push(new P(.25*W,.95*H-.05*W,.02*W,0,6,-1)),p.push(new P(.35*W,.99*H-.05*W,.02*W,0,6,-1)),i=0;35>i;i++)p.push(new P(.5*W,.02*i*W,.01*W,0,6,-1));a=new A(-200,-255,p[0]),el.push(new E(.14*W,.95*H-.05*W,.005*W,1)),el.push(new E(.16*W,.4*H-.05*W,.005*W,2)),el.push(new E(.9*W,.3*H-.05*W+.06*W,.005*W,3)),el.push(new E(.6*W,.45*H,.03*W,4));break;case 13:p.push(new P(.8*W,.5*H,.1*W,0,1,-1)),p.push(new P(.3*W,.4*H,.05*W,0,1,-1)),p.push(new P(.4*W,.3*H-.05*W,.03*W,0,5,3)),p.push(new P(.9*W,.3*H,.03*W,0,5,2)),p.push(new P(.5*W,.5*H,.03*W,0,4,-1)),p.push(new P(.2*W,.8*H,.03*W,0,4,-1)),p.push(new P(.75*W,.8*H,.03*W,0,4,-1)),a=new A(-200,-255,p[0]),el.push(new E(.24*W,.4*H,.005*W,1)),el.push(new E(.36*W,.4*H,.005*W,2)),el.push(new E(.69*W,.5*H,.005*W,3)),el.push(new E(.8*W,.5*H+.12*W,.02*W,4));break;case 14:p.push(new P(.3*W,.4*H,.05*W,0,1,-1)),p.push(new P(.5*W,.5*H,.05*W,4,1,-1)),p.push(new P(.8*W,.3*H,.05*W,6,1,-1)),p.push(new P(.8*W,.8*H,.03*W,0,5,4)),p.push(new P(.32*W,.8*H,.03*W,0,5,3)),p.push(new P(.3*W,.9*H,.03*W,0,5,6)),p.push(new P(.3*W,.1*H,.03*W,0,5,5)),p.push(new P(.15*W,.4*H,.03*W,0,5,8)),p.push(new P(.2*W,.9*H,.03*W,0,5,7)),a=new A(-200,-255,p[0]),el.push(new E(.24*W,.4*H,.005*W,1)),el.push(new E(.36*W,.4*H,.005*W,2)),el.push(new E(.8*W,.74*H,.005*W,3)),el.push(new E(.1*W,.9*H,.02*W,4));break;case 15:p.push(new P(100*W/600,200*H/400,20*W/600,0,3)),p.push(new P(100*W/600,200*H/400,10*W/600,6,2)),p.push(new P(500*W/600,200*H/400,20*W/600,0,3)),p.push(new P(500*W/600,200*H/400,10*W/600,6,2)),a=new A(-100,-255,p[0]),el.push(new E(100*W/600,310*H/400,.005*W,1)),el.push(new E(500*W/600,310*H/400,.005*W,2)),el.push(new E(500*W/600,230*H/400,.005*W,3)),el.push(new E(300*W/600,350*H/400,.02*W,4));break;default:levels()}}var drawGame=function(){ctx.drawImage(m_canvas,0,0),ctx.save(),p.forEach(function(a){ctx.save(),ctx.translate(a.c[0],a.c[1]),4==a.co?(a.t+=4==a.co?.02:.005,ctx.rotate(a.t)):6==a.co&&ctx.rotate(a.t),ctx.drawImage(planetImages[a.co],-a.r,-a.r,2*a.r,2*a.r),ctx.restore()}),el.forEach(function(a){if(ctx.save(),4!=a.co&&a.c[0]>=0){switch(ctx.beginPath(),ctx.arc(a.c[0],a.c[1],a.r,0,2*Math.PI),ctx.strokeStyle="rgba(0,0,0,0)",ctx.strokeStyle="#F6E3CE",a.co){case 1:ctx.fillStyle="red";break;case 2:ctx.fillStyle="#0174DF";break;case 3:ctx.fillStyle="#8A4B08";break;case 4:ctx.fillStyle="#BDBDBD"}ctx.fillStyle="#D7DF01",ctx.fill(),ctx.restore()}else 0==completedLevel&&(ctx.save(),ctx.translate(a.c[0],a.c[1]),ctx.rotate(portalImage.t),portalImage.t+=.01,ctx.drawImage(portalImage,-a.r,-a.r,2*a.r,2*a.r),ctx.restore())}),a.r>2&&0==completedLevel&&!asteroid?((1!=play||0!=completedLevel)&&(a.r-=.0015*W),ctx.save(),ctx.translate(a.c[0],a.c[1]),ctx.rotate(-a.t),ctx.drawImage(characterImage[localStorage.character],-a.r,-a.r,2*a.r,2*a.r),ctx.restore()):0==completedLevel&&(play=0),renderControls(ctx),drawTutorial(ctx),0==tutorial&&1==play&&0==completedLevel&&ctx.drawImage(pauseImage,pauseImage.px,pauseImage.py,pauseImage.w,pauseImage.h)},gameMain=function(){if(!pause)if(-1==play)ctx.clearRect(0,0,W,H),ctx.fillStyle="rgb(250, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("You've completed all the levels",130,180);else if(1==play)if(1==completedLevel)nlvl(ctx,1);else for(move(ctx),i=0;i<p.length;i++)p[i].u();else nlvl(ctx,0),gameOver||(1==localStorage.audio&&gameOverAudio.play(),gameOver=!0),move(ctx);pause&&nlvl(ctx,2)},then=Date.now(),p=[],a,play=1,el=[],got=0,lv=1,record=!1,asteroid=!1,tutorial,completedLevel=0,pause=!1,gameOver=!1;